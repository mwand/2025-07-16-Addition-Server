Fix the many problems with the frontend.
